<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1' media='(device-height: 568px)' name='viewport'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <div class="container mt-4"> 
        <div class="row">
            
            <div class="col-md-4">
                <div class="mb-3">
                    <label for="host" class="form-label">Host</label>
                    <input type="text" class="form-control" id="host" value="test.ca.digital-front-door.dev.gcp.trchq.com">
                </div>

                <div class="mb-3">
                    <label for="app_key" class="form-label">App Key</label>
                    <input type="text" class="form-control" id="app_key" value="NKubX8qcG34kVPYPNEabB5A5">
                </div>

                <div class="mb-3">
                    <label for="language" class="form-label">Language</label>
                    <input type="text" class="form-control" id="language" value="en">
                </div>

                <div class="mb-3">
                    <label for="identifier_key" class="form-label">Identifier Key</label>
                    <input type="text" class="form-control" id="identifier_key">
                </div>

                <div class="mb-3">
                    <label for="email" class="form-label">Email address</label>
                    <input type="email" class="form-control" id="email">
                </div>
                <div class="mb-3">
                    <label for="first_name" class="form-label">First Name</label>
                    <input type="text" class="form-control" id="first_name">
                </div>

                <div class="mb-3">
                    <label for="last_name" class="form-label">Last Name</label>
                    <input type="text" class="form-control" id="last_name">
                </div>

                <div class="mb-3">
                    <label for="mode" class="form-label">Mode</label>
                    <select class="form-select" id="mode">
                        <option selected>default</option>
                        <option value="default">Default</option>
                        <option value="embedded">Embedded</option>
                    </select>
                </div>
                <button type="submit" id="start" class="btn btn-primary w-100">Start</button>
            </div>

            <div class="col-md-8">
                <div id="parent_container" style="overflow: auto; border-radius: 4px; border: 1px solid #ced4da; height: 100%; min-height: 600px;"></div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        var btn = document.getElementById("start");
        btn.addEventListener('click', function() {
            var host = document.getElementById("host").value;
            var app_key = document.getElementById("app_key").value;
            var email = document.getElementById("email").value;
            var identifier_key = document.getElementById("identifier_key").value;
            var first_name = document.getElementById("first_name").value;
            var last_name = document.getElementById("last_name").value;
            var language = document.getElementById("language").value;
            var mode = document.getElementById("mode").value;

            var data = {
                email: email,
                identifier_key: identifier_key,
                properties: {
                    first_name: first_name,
                    last_name: last_name
                },
            };

            var g = document.createElement('script'),
                s = document.getElementsByTagName('script')[0];
            g.src = "https://" + host + "/embed.js";
            s.parentNode.insertBefore(g, s);
            g.onload = function() {
                window.virtualCareMessenger = new window.VirtualCareMessengerEncrypted({
                    domain: "https://" + host,
                    ws: "wss://" + host + "/cable",
                    data: data,
                    lang: language,
                    app_id: app_key,
                    mode: mode,
                    wrapperId: 'parent_container'
                })
            };
        });
    </script>
</body>

</html>
