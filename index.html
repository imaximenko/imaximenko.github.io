<!doctype html>
<html lang="en">    
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'>
  <meta content='width=device-width, initial-scale=1, maximum-scale=1' media='(device-height: 568px)' name='viewport'>
  <title>Chat test page</title>
</head>
  <body>
    <h1>Test chat page</h1>
<style>
  .my-messenger {
    position: unset;
    height: 704px;
  }
  .my-container {
    position: unset;
    width: unset;
  }
  #toggle-button {
    margin-top: 20px;
    padding: 10px;
    background: red;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    border: 1px solid;
  }
  #messenger-container {
    position: fixed;
    bottom: 20px;
    left: 20px;
  }
</style>
<div id="messenger-container">
  <div id="my-messenger"></div>
  <button id="toggle-button">Open</button>
</div>
<script>
// Define the parameters as variables
var documentElement = document;
var scriptTag = "script";
var scriptSrc = "https://test.ca.digital-front-door.dev.gcp.trchq.com/embed.js";
var domain = "https://test.ca.digital-front-door.dev.gcp.trchq.com";
var wsUrl = 'wss://test.ca.digital-front-door.dev.gcp.trchq.com/cable';
var language = "en";
var appId = "NKubX8qcG34kVPYPNEabB5A5";
var mode = 'default';

// Set the variables in the document (e.g., using data attributes or a custom script tag)
documentElement.documentElement.setAttribute('data-script-src', scriptSrc);
documentElement.documentElement.setAttribute('data-domain', domain);
documentElement.documentElement.setAttribute('data-ws-url', wsUrl);
documentElement.documentElement.setAttribute('data-language', language);
documentElement.documentElement.setAttribute('data-app-id', appId);
documentElement.documentElement.setAttribute('data-mode', mode);

(function(d,t,src,dom,ws,lang,app,mod) {
  var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=src;
  s.parentNode.insertBefore(g,s);
  g.onload=function(){
    window.virtualCareMessenger = new window.VirtualCareMessengerEncrypted({
      domain: dom,
      ws:  ws,
      lang: lang,
      app_id: app,
      mode: mod,
      wrapperId: "my-messenger",
      hideToggleButton: true,
      containerClassName: "my-container",
      messengerClassName: "my-messenger",
    });

    document.getElementById("toggle-button").addEventListener("click", function(e) {
      virtualCareMessenger.toggleMessenger();
      e.srcElement.innerText = virtualCareMessenger.isOpen ? "Close" : "Open";
    });
  }
})(documentElement, scriptTag, scriptSrc, domain, wsUrl, language, appId, mode);
</script>
  </body>
</html>
